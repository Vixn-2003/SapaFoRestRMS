@{
    ViewData["Title"] = "Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n";
    Layout = "~/Views/Shared/_LayoutManager.cshtml";
    int orderId = ViewBag.OrderId ?? 0;
    string apiBaseUrl = ViewBag.ApiBaseUrl as string ?? "https://localhost:7000/api";
}

<h2 class="mb-3">Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n</h2>

<div class="mb-3">
    <a href="/Payment/OrderDetail?id=@orderId" class="btn btn-secondary">
        <i class="bi bi-arrow-left me-2"></i>Quay l·∫°i
    </a>
</div>

<div class="row g-3">
    <div class="col-md-6">
        <div class="card h-100" style="cursor: pointer;" onclick="selectPaymentMethod('cash')">
            <div class="card-body text-center">
                <div class="fs-1 mb-3">üíµ</div>
                <h5 class="card-title">Ti·ªÅn m·∫∑t</h5>
                <p class="card-text text-muted">Thanh to√°n b·∫±ng ti·ªÅn m·∫∑t</p>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card h-100" style="cursor: pointer;" onclick="selectPaymentMethod('card')">
            <div class="card-body text-center">
                <div class="fs-1 mb-3">üí≥</div>
                <h5 class="card-title">Th·∫ª</h5>
                <p class="card-text text-muted">Th·∫ª t√≠n d·ª•ng / Ghi n·ª£</p>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card h-100" style="cursor: pointer;" onclick="selectPaymentMethod('ewallet')">
            <div class="card-body text-center">
                <div class="fs-1 mb-3">üì±</div>
                <h5 class="card-title">V√≠ ƒëi·ªán t·ª≠</h5>
                <p class="card-text text-muted">MoMo, ZaloPay, VNPay...</p>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card h-100" style="cursor: pointer;" onclick="selectPaymentMethod('split')">
            <div class="card-body text-center">
                <div class="fs-1 mb-3">üí∏</div>
                <h5 class="card-title">Chia bill</h5>
                <p class="card-text text-muted">Chia h√≥a ƒë∆°n nhi·ªÅu ng∆∞·ªùi</p>
            </div>
        </div>
    </div>
</div>

<!-- Toast Notification -->
<div class="toast-container">
    <div id="toastNotification" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <strong class="me-auto">Th√¥ng b√°o</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body" id="toastMessage"></div>
    </div>
</div>

@section Scripts {
    <script>
        const apiBaseUrl = '@apiBaseUrl';
        const orderId = @orderId;
        let selectedMethod = null;

        // Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n
        function selectPaymentMethod(method) {
            selectedMethod = method;
            // Chuy·ªÉn ƒë·∫øn m√†n h√¨nh x√°c nh·∫≠n
            window.location.href = `/Payment/PaymentConfirmation?orderId=${orderId}&method=${method}`;
        }

        // Show toast
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toastNotification');
            const toastMessage = document.getElementById('toastMessage');
            toastMessage.textContent = message;
            
            const toastInstance = new bootstrap.Toast(toast);
            toastInstance.show();
        }
    </script>
}

